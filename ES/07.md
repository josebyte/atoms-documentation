#Atoms
## 7 - Extensiones

Hasta ahora hemos aprendido el *core* de Atoms, hemos descubierto que existe un pseudo-DOM encargado de la gestión de elementos y de su representación final en el DOM. Hemos aprendido que existen elementos de representación como son: *Atom*, *Molecule* y *Organism* y que existe un elemento especial, *Entity*, que es quien almacena la unidad informativa de tu aplicación. Todos ellos se comunican por un sistema propio de eventos que puede tener diferentes tipologías dependiendo de las necesidades de tu aplicación: *Bubbling*/*Tuneling*, *Bind*/*Trigger*, *Entity Binding*... 

Ahora con todo lo aprendido podemos comenzar con la verdadera funcionalidad de Atoms, la creación atómica por medio de extensiones. La creación atómica se basa en la reutilización de los elementos básicos (*Atom*, *Molecule* y *Organism*) y su combinación para la creación de nuevos elementos extendidos que a su vez pueden volver a reutilizarse. De esta manera cualquier extensión que crees podrás reutilizarla en todo momento independientemente de las futuras versiónes de Atoms que utilices, ya que al basarse en extensiones de elementos básicos seguirá cumpliendo las interfaces implicitas. Con esto, en un futuro próximo la programación Web cambiará con la llegada de los llamados [Web Components](http://webcomponents.org/), cuando estos sean una realizada existirá una nueva versión del Core de Atoms la cual será totalmente compatible con todas las extensiones creadas hasta el momento.


### 7.1 - Nuestra primera extensión
Ahora vamos a crear nuestra primera extensión gracias a todo lo aprendido en todos los capítulos anteriores. En este caso vamos a crear una extensión que gestione la conocida etiqueta `<form>`, como sabemos debe ser un elemento del tipo Molecule, puesto que es un contenedor de elementos más básicos y para esta primera versión necesitarémos crear:

   - *Atom*: `<input/>` y `<button/>`
   - *Molecule*: `<form/>`

Sabemos que un formulario puede contener más elementos como `<label>`, `<fieldset>`,... pero queremos que profundices en la creación extendida de elementos con lo mínimo posible, el resto de extensiones de Atom te la dejamos para tus ratos libres :)

### 7.2 - Atom.Input
Vamos a comenzar con la creación de la etiqueta `<input/>` la cual como sabemos puede tener diferentes tipos: `"text"`, `"password"`, `"range"` y como queremos que sea lo más dinámica posible crearemos su definición con un template lo suficientemente extensible:

```
class Atom.Input extends Atoms.Class.Atom

  @template : """
    <input type="{{type}}" name="{{name}}" {{#if.placeholder}}placeholder="{{placeholder}}"{{/if.placeholder}} {{#if.style}}class="{{style}}"{{/if.style}} {{#if.value}}value="{{value}}"{{/if.value}} {{#required}}required{{/required}} {{#disabled}}disabled{{/disabled}} />"""

  @base     : "Input"
```

Como sabemos y gracias al motor de renderización [Mustache](http://mustache.github.io/) podemos crear todos los *Binding Properties*, `{{}}`,  que necesitemos y en nuestro caso para la representación en el DOM podrémos establecer los atributos: `type`, `placeholder`, `style`, `value`, `required` y `disabled`. Recuerda que tenemos el pseudo-DOM por lo que podremos establecer otros atributos para su utilización en cada instancia, los cuales nunca serán representados en el DOM. Comencemos a crear unas instancias de prueba para ver su representación:

```
text = new Input type: "text", placeholder: "Your name..."
text.el.html()
> <input type="text" placeholder="Your name..." />

password = new Input type: "password", required: true
password.el.html()
> <input type="password" required />

number = new Input type: "number", value: 1980
number.el.html()
> <input type="number" value="1980" />
```

Como podemos comprobar el resultado final en el DOM es el que buscamos, ahora vamos a asignar los `@events` permitidos para nuestro `Atom.Input` asi como algun valor por defecto estableciendo `@default`:

```
class Atom.Input extends Atoms.Class.Atom
  ... 
  
  @events   : ["keypress", "keyup", "change"]
    
  @default  :
    type: "text"
```

Ahora nuestro `Atom.Input` es capaz de desplegar los eventos *Bubble*: `"keypress"`, `"keyup"`, `"change"`, recordando que realmente Atoms se subscribe por medio del método nativo `AddEventListener` a los citados eventos y una vez se ejecuten los publica con *Bubbling* en nuestra aplicación.

Ahora vamos a crear un método de instancia que nos devuelva el valor actual del `Atom.Input`, para ello necesitarémos hacer referencia al elemento del DOM por medio del simbolo `@el`:

```
class Atom.Input extends Atoms.Class.Atom
  ... 
  
  value: (value) ->
    if value? then @el.val value else @el.val()
```

Como puedes leer el método de instancia `value`, realiza dos funciones: establecer un nuevo valor a la instancia o recoger el actual. Veamos como funciona:

```
number = new Input type: "number", value: 1980
number.value()
> 1980

number.value 1983
number.value()
> 1983

number.el.html()
> <input type="number" value="1983" />
```

Bien, ahora vamos a crear otro método de instancia que controle la visualización en el caso de que el valor introducimos no sea el correcto, lo llamaremos `error`:

```
class Atom.Input extends Atoms.Class.Atom
  ... 
  
  error: (value) ->
    method = if value then "addClass" else "removeClass"
    @el[method] "error"
```

Con el método `error` conseguimos añadir la clase `"error"` en el caso de que se le pase un `true` como parametro, en caso contrario eliminará toda señal de esta clase. Con esto finalizamos la creación de nuestro primer elemento *Atom*, `Atom.Input` es capaz de:

  - Representar todo tipo de `<input/>`, por defecto `"text"`.
  - Subscribirse a los eventos nativos: `"keypress"`, `"keyup"`, `"change"`.
  - Extender el objeto DOM dos nuevos métodos de instancia `value` y `error`.


### 7.3 - Atom.Button


```
class Atoms.Atom.Button extends Atoms.Class.Atom

  @template : """
    <button class="{{style}}{{^if.text}} icon{{/if.text}}" {{#if.disabled}}disabled{{/if.disabled}}>
      {{#if.icon}}<span class="icon {{icon}}"></span>{{/if.icon}}
      {{#if.text}}<abbr>{{text}}</abbr>{{/if.text}}
    </button>"""

  @base     : "Button"

  @events   : ["touch"]

  @default  :
    events: ["touch"]

```

### 7.4 - Molecule.Form


### 7.5 - Extendiendo Molecule.Form


### 7.6 - Conoce Atoms.APP 

Esta extensión y otras más se engloban en un proyecto llamado [Atoms-App](https://github.com/tapquo/atoms-app)
